datadog:
  apmtraceportforward: true
  datadog:
    clusterName: nprd-02-a9ef
    tags: [manawa-cluster:nprd-02-a9ef, platform:ccdp, managed_by:observability_team, cluster_slo:true, obs-env:nprd]
    otlp:
      receiver:
        protocols:
          # datadog.otlp.receiver.protocols.grpc - OTLP/gRPC configuration
          grpc:
            # datadog.otlp.receiver.protocols.grpc.enabled -- Enable the OTLP/gRPC endpoint
            enabled: true
            # datadog.otlp.receiver.procotols.grpc.endpoint -- OTLP/gRPC endpoint
            endpoint: "0.0.0.0:4317"

          # datadog.otlp.receiver.protocols.http - OTLP/HTTP configuration
          http:
            # datadog.otlp.receiver.protocols.http.enabled -- Enable the OTLP/HTTP endpoint
            enabled: true
            # datadog.otlp.receiver.protocols.http.endpoint -- OTLP/HTTP endpoint
            endpoint: "0.0.0.0:4318"
  clusterChecksRunner:
    replicas: 5  
    env:
      - name: DD_KUBERNETES_APISERVER_CLIENT_TIMEOUT
        value : 120
    priorityClassName: datadog-priority-class
    resources:
      requests:
        cpu: 800m
        memory: 1024Mi
      limits:
        cpu: 8000m
        memory: 8000Mi
    deploymentAnnotations:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
    podAnnotations:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
    additionalLabels:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
  clusterAgent:
    metricsProvider:
      enabled: true
      # clusterAgent.metricsProvider.useDatadogMetrics
      # Enable usage of DatadogMetric CRD to autoscale on arbitrary Datadog queries
      useDatadogMetrics: true
    priorityClassName: datadog-priority-class
    resources:
      requests:
        cpu: 2000m
        memory: 4096Mi
      limits:
        cpu: 4000m
        memory: 8192Mi
    env:
      - { name: DD_ADMISSION_CONTROLLER_AUTO_INSTRUMENTATION_INIT_RESOURCES_CPU, value: "100m" }
      - { name: DD_ADMISSION_CONTROLLER_AUTO_INSTRUMENTATION_INIT_RESOURCES_MEMORY, value: "512Mi" }
      - { name: DD_EXTERNAL_METRICS_PROVIDER_MAX_AGE, value: "900" }
      - { name: DD_EXTERNAL_METRICS_PROVIDER_BUCKET_SIZE, value: "900" }
      - { name: DD_LOG_FORMAT_JSON, value: "true" }
      - { name: DD_CLUSTER_CHECKS_ADVANCED_DISPATCHING_ENABLED, value: "true" }
    deploymentAnnotations:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
    podAnnotations:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
    additionalLabels:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
  agents:
    podLabels:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
    podAnnotations:
      manawa/cluster_name: nprd-02-a9ef
      manawa/environment: prep
